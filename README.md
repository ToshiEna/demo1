# 株主総会Q&Aシミュレーションシステム
## Shareholder Meeting Q&A Simulation System

GitHub Copilot Coding Agent demo - 機能要件からの初期開発

上場企業のIR担当者や経営陣が株主総会の質疑応答準備を効率化するためのQ&Aシミュレーションシステムです。生成AIを活用し、株主役エージェントと会社側エージェントの対話をシミュレーションすることで、準備作業の負担軽減と質の向上を図ります。

## 機能概要

### 主要機能
- **IR資料アップロード**: PDF形式の年次報告書、決算資料等をアップロード
- **想定質問入力**: 株主から想定される質問事項を入力
- **AIエージェント対話**: 株主エージェントと会社側エージェントによる自動Q&A生成
- **リアルタイム表示**: チャット形式での対話進行表示
- **セッション管理**: 過去のシミュレーション履歴確認
- **シミュレーション制御**: 一時停止、再開、強制次質問、終了機能

### 対応要件
このシステムは以下の機能要件（FR）に対応しています：
- FR-1: IR資料アップロード
- FR-2: セキュリティ管理
- FR-3: 想定質問入力
- FR-4: データ準備完了確認
- FR-5: シミュレーション開始
- FR-6: 株主エージェント（質問生成）
- FR-7: 会社側エージェント（回答生成）
- FR-8: 対話フローと繰り返し
- FR-9: シミュレーション終了条件
- FR-10: チャット形式での対話表示
- FR-12: UI操作性
- FR-14: セッションログ保存
- FR-15: Q&Aログ確認
- FR-17: AIモデル連携（フレームワーク）

## システム構成

### 技術スタック
- **フロントエンド**: HTML5, CSS3, Vanilla JavaScript (SPA)
- **バックエンド**: Node.js, Express.js
- **AI統合**: Azure OpenAI API連携フレームワーク
- **ファイル処理**: PDF-Parse (テキスト抽出)
- **セッション管理**: In-memory storage (開発版)

### アーキテクチャ
```
┌─────────────────┐    ┌─────────────────┐    ┌─────────────────┐
│   Frontend      │    │   Backend       │    │   AI Service    │
│   (SPA)         │◄──►│   (Express)     │◄──►│   (Azure OpenAI)│
│                 │    │                 │    │                 │
│ - File Upload   │    │ - PDF Processing│    │ - GPT-4         │
│ - Chat UI       │    │ - Session Mgmt  │    │ - Q&A Generation│
│ - Controls      │    │ - API Endpoints │    │                 │
└─────────────────┘    └─────────────────┘    └─────────────────┘
```

## セットアップ手順

### 1. 依存関係のインストール
```bash
npm install
```

### 2. 環境設定
```bash
cp .env.example .env
# .envファイルを編集して必要な設定を行う
```

### 3. サーバー起動
```bash
# 開発モード
npm run dev

# 本番モード
npm start
```

### 4. アクセス
ブラウザで `http://localhost:3000` にアクセス

## 使用方法

### 1. IR資料のアップロード
- PDFファイルをドラッグ&ドロップまたはファイル選択でアップロード
- 複数ファイルの同時アップロード対応
- 自動的にテキスト抽出を実行

### 2. 想定質問の入力（オプション）
- 株主から想定される質問を改行区切りで入力
- 未入力の場合、AIが自動的に質問を生成

### 3. シミュレーション実行
- 「Q&Aシミュレーション開始」ボタンでセッション開始
- 株主エージェントが質問生成、会社側エージェントが回答生成
- リアルタイムでチャット形式で表示

### 4. シミュレーション制御
- **一時停止/再開**: 途中で内容確認やメモ取りが可能
- **次の質問へ**: 現在のトピックを終了して次の質問に移行
- **終了**: シミュレーション全体を終了

### 5. 履歴確認
- 過去のセッション一覧を表示
- 任意のセッションを選択して対話履歴を再表示

## API仕様

### エンドポイント一覧

#### ドキュメント管理
- `POST /api/upload` - IR資料アップロード
- `GET /api/documents` - アップロード済み資料一覧

#### セッション管理
- `POST /api/sessions` - 新規セッション作成
- `GET /api/sessions` - セッション一覧取得
- `GET /api/sessions/:id` - 特定セッション取得

#### シミュレーション制御
- `POST /api/sessions/:id/start` - シミュレーション開始
- `POST /api/sessions/:id/respond` - 会社側応答生成
- `POST /api/sessions/:id/continue` - 対話継続
- `POST /api/sessions/:id/end` - シミュレーション終了

## セキュリティ考慮事項

### 現在の実装
- ファイルタイプ検証（PDFのみ許可）
- ファイルサイズ制限（50MB）
- アップロードファイルの一時保存後削除

### 本番環境での追加対策
- ユーザー認証・認可
- テナント分離
- データ暗号化
- アクセスログ監査
- Azure OpenAI データ保護設定

## 今後の拡張予定

### 短期
- Azure OpenAI統合の完全実装
- データベース連携（PostgreSQL/MongoDB）
- ユーザー認証システム
- セッションエクスポート機能

### 中期
- 出典表示機能（FR-11）
- 多言語対応（FR-13）
- 音声入力・出力機能
- パフォーマンス最適化

### 長期
- 自動資料クローリング
- 高度な分析・レポート機能
- 他の会議システムとの連携
- モバイルアプリ対応

## ライセンス

MIT License

## 貢献

プルリクエストやイシューの報告を歓迎します。開発に参加される場合は、以下の手順に従ってください：

1. このリポジトリをフォーク
2. 機能ブランチを作成 (`git checkout -b feature/amazing-feature`)
3. 変更をコミット (`git commit -m 'Add amazing feature'`)
4. ブランチにプッシュ (`git push origin feature/amazing-feature`)
5. プルリクエストを作成

## サポート

技術的な質問やサポートが必要な場合は、GitHubのIssuesを通じてお知らせください。
